% Tikz File 'salesb.tex'
\documentclass{standalone}
\usepackage{tikz}
\usepackage{tikz-er2}

\begin{document}

\begin{tikzpicture}
    % RELATIONS
    \node (salespersonn) {\textbf{SALESPERSON}};
    \node [relation=2,
            below=2em of salespersonn.west,
            anchor=west] (salesperson) {
            \nodepart{one} \key{Sid}
                \nodepart{two} Name
        };

    \node [below=6em of salespersonn.west, anchor=west]
        (customern) {\textbf{CUSTOMER}};
    \node [relation=5,
            below=2em of customern.west,
            anchor=west] (customer) {
            \nodepart{one} \key{SSN}
                \nodepart{two} Name
                    \nodepart{three} State
                        \nodepart{four} Street
                            \nodepart{five} City
        };

    \node [below=6em of customern.west, anchor=west]
        (salecarn) {\textbf{CAR\_SALE}};
    \node [relation=4,
            below=2em of salecarn.west,
            anchor=west] (salecar) {
            \nodepart{one} \key{Salespersonn\_Sid}
                \nodepart{two} \key{Customer\_SSN}
                    \nodepart{three} \key{Vehicle\_IN}
                        \nodepart{four} Date
        };

    %specialization for 8B

    \node [below=6em of salecarn.west, anchor=west]
        (carn) {\textbf{CAR}};
    \node [relation=4,
            below=3em of carn.west,
            anchor=west] (car) {
            \nodepart{one} \key{Vin}
                \nodepart{two} Model
                    \nodepart{three} Price
                        \nodepart{four} Engine\_size
        };
    \draw[relation_arrow] (salecar.three south) |- ($(car.one north) + (0,0.4)$)
        -- (car.one north);

    \draw[relation_arrow] (salecar.two north) -- ++(0,0.4)
        |- ($(customer.one south) + (0,-0.8)$)
        -| ($(customer.one south) + (-0.2,0)$);

    \draw[relation_arrow] (salecar.one south) -- ++(0,-0.4)
        -| ($(salesperson.one south) + (-1,-0.8)$)
        -| ($(salesperson.one south) + (0.2,0)$);

    \node [below=6em of carn.west, anchor=west]
        (saletruckn) {\textbf{TRUCK\_   SALE}};
    \node [relation=4,
            below=2em of saletruckn.west,
            anchor=west] (saletruck) {
            \nodepart{one} \key{Salespersonn\_Sid}
                \nodepart{two} \key{Customer\_SSN}
                    \nodepart{three} \key{Vehicle\_IN}
                        \nodepart{four} Date
        };

    \node [below=6em of saletruckn.west, anchor=west]
        (truckn) {\textbf{TRUCK}};
    \node [relation=4,
            below=3em of truckn.west,
            anchor=west] (truck) {
            \nodepart{one} \key{Vin}
                \nodepart{two} Model
                    \nodepart{three} Price
                        \nodepart{four} Engine\_size
        };
    \draw[relation_arrow] (saletruck.three south) |- ($(truck.one north) + (0,0.4)$)
        -- (truck.one north);

    \draw[relation_arrow] (saletruck.two north) |- ($(saletruck.four east) + (0.8,0.8)$)
        |- ($(customer.one south) + (0,-0.6)$) -- (customer.one south);


    \draw[relation_arrow] (saletruck.one south) -- ++(0,-0.4)
        -| ($(salesperson.one south) + (-1.5,-0.6)$)
        -| ($(salesperson.one south) + (0,0)$);

    \node [below=6em of truckn.west, anchor=west]
        (salesuvn) {\textbf{SUV\_   SALE}};
    \node [relation=4,
            below=2em of salesuvn.west,
            anchor=west] (salesuv) {
            \nodepart{one} \key{Salespersonn\_Sid}
                \nodepart{two} \key{Customer\_SSN}
                    \nodepart{three} \key{Vehicle\_IN}
                        \nodepart{four} Date
        };

    \node [below=6em of salesuvn.west, anchor=west]
        (suvn) {\textbf{SUV}};
    \node [relation=4,
            below=3em of suvn.west,
            anchor=west] (suv) {
            \nodepart{one} \key{Vin}
                \nodepart{two} Model
                    \nodepart{three} Price
                        \nodepart{four} Engine\_size
        };
    \draw[relation_arrow] (salesuv.three south) |- ($(suv.one north) + (0,0.4)$)
        -- (suv.one north);

    \draw[relation_arrow] (salesuv.two north) |- ($(salesuv.four east) + (1.5,0.8)$)
        |- ($(customer.one south) + (0.2,-0.4)$) -- ($(customer.one south) + (0.2,0)$);


    \draw[relation_arrow] (salesuv.one south) -- ++(0,-0.4)
        -| ($(salesperson.one south) + (-2,-0.4)$)
        -| ($(salesperson.one south) + (-0.2,0)$);
\end{tikzpicture}

\end{document}
